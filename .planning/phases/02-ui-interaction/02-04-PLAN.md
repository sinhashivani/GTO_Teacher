# Plan: 02-04 - Storage & Settings [PH2-STORAGE]

**Goal:** Integrate Dexie.js for persistent settings and session history.

## Context
Players want to save their progress, settings (e.g., feedback timing), and review past hands.

## Proposed Changes

### 1. Dexie.js Setup
- **`db.ts`**: Define the schema for `settings` and `hands` tables.
- **`useSettings`**: A custom hook to sync settings with IndexedDB.
- **`useHistory`**: A custom hook to store and retrieve hand histories.

### 2. Settings UI
- **`SettingsDialog`**: A modal or drawer to toggle feedback timing and other preferences.
- **`HistoryList`**: A list of past hands in the current session.

## Verification Plan

### Automated Tests
- Create `lib/poker/__tests__/db.test.ts`.
- Verify that settings are saved and retrieved correctly.
- Test that a hand history can be written and read back.

### Manual Verification
- Update a setting, refresh the page, and ensure it persists.
- Complete a hand and check that it appears in the history list.
