---
phase: 05-expansion-future
plan: 05
type: execute
wave: 5
depends_on: [05-01, 05-02, 05-03, 05-04]
files_modified: [src/lib/poker/__tests__/engine.test.ts, src/lib/poker/__tests__/betting.test.ts, .planning/phases/05-expansion-future/PHASE-05-UAT.md]
autonomous: true
requirements: [PH5-UAT]

must_haves:
  truths:
    - "Automated tests confirm correct turn order for 2-6 players"
    - "Automated tests confirm side pot distribution"
    - "UAT checklist is completed and all flows verified"
  artifacts:
    - path: "src/lib/poker/__tests__/engine.test.ts"
      provides: "Turn order verification"
    - path: ".planning/phases/05-expansion-future/PHASE-05-UAT.md"
      provides: "Manual verification guide"
---

<objective>
Perform final verification through automated tests and a comprehensive manual UAT.

Purpose: Ensure quality and correctness of the expansion.
Output: Passing test suite and signed-off UAT checklist.
</objective>

<execution_context>
@C:/Users/sinha/.gemini/get-shit-done/workflows/execute-plan.md
@C:/Users/sinha/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-expansion-future/05-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated Engine Verification</name>
  <files>src/lib/poker/__tests__/engine.test.ts, src/lib/poker/__tests__/betting.test.ts</files>
  <action>
    - Add comprehensive unit tests to `engine.test.ts` for turn order in 2, 3, 4, 5, and 6 player games (Preflop vs Post-flop).
    - Add tests to `betting.test.ts` for complex side pot scenarios (e.g., 3 players all-in with different stack sizes).
    - Ensure all street transitions (Flop -> Turn -> River -> Showdown) are covered.
  </action>
  <verify>
    <automated>npm test</automated>
    <manual>None</manual>
    <sampling_rate>After task completion</sampling_rate>
  </verify>
  <done>Core logic is verified by automated tests.</done>
</task>

<task type="auto">
  <name>Task 2: UAT Checklist and Manual Walkthrough</name>
  <files>.planning/phases/05-expansion-future/PHASE-05-UAT.md</files>
  <action>
    - Create `PHASE-05-UAT.md` with the following categories:
      - Multiplayer Setup (2-6 seats)
      - Street Progression (Turn/River)
      - Side Pots (All-in handling)
      - Bot Behavior (Easy/Med/Exp/Mixed)
      - Settings Persistence & UI Toggles
      - Leave Game & History
    - Perform a full manual walkthrough of the app and check off items in the UAT file.
  </action>
  <verify>
    <automated>None</automated>
    <manual>Read through the completed PHASE-05-UAT.md</manual>
    <sampling_rate>After task completion</sampling_rate>
  </verify>
  <done>Final manual verification completed.</done>
</task>

</tasks>

<verification>
Run the full test suite and ensure 100% pass rate. Verify that the UAT checklist covers all "User Instructions" from the CONTEXT.md.
</verification>

<success_criteria>
- All unit tests for multiplayer engine pass.
- UAT checklist is fully completed and verified.
- No regression in single-opponent mode.
</success_criteria>

<output>
After completion, create `.planning/phases/05-expansion-future/05-05-SUMMARY.md`
</output>
