---
phase: 05-expansion-future
plan: 02
type: execute
wave: 2
depends_on: [05-01]
files_modified: [src/lib/poker/bot.ts, src/lib/useCoaching.ts]
autonomous: true
requirements: [PH5-BOTS]

must_haves:
  truths:
    - "Bots act sequentially in multiplayer games"
    - "Bots provide actions and rationales for Turn and River stages"
    - "Mixed difficulty mode assigns different profiles to different bots"
  artifacts:
    - path: "src/lib/poker/bot.ts"
      provides: "Multi-street and multi-player bot logic"
    - path: "src/lib/useCoaching.ts"
      provides: "Expanded coaching for Turn/River"
  key_links:
    - from: "src/lib/poker/bot.ts"
      to: "src/lib/poker/evaluator.ts"
      via: "hand strength assessment"
---

<objective>
Scale Bot AI and coaching logic to support multiplayer games and full streets (Turn/River).

Purpose: Enable intelligent opponents in expanded game modes.
Output: Sequential bot decision engine and multi-street coaching.
</objective>

<execution_context>
@C:/Users/sinha/.gemini/get-shit-done/workflows/execute-plan.md
@C:/Users/sinha/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/poker/bot.ts
@src/lib/useCoaching.ts
@.planning/phases/05-expansion-future/05-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scale Bot Decision Logic</name>
  <files>src/lib/poker/bot.ts</files>
  <action>
    - Update `getBotAction` to handle sequential turn order (bots wait for their index).
    - Implement heuristic-based decision making for `TURN` and `RIVER` stages.
    - Add support for `Mixed` difficulty: allow assigning specific `Easy`, `Medium`, or `Expert` profiles to specific seat indices.
    - Ensure bots only use public info + their hole cards (no deck peeking).
  </action>
  <verify>
    <automated>npm test src/lib/poker/__tests__/bot.test.ts</automated>
    <manual>Check console logs for bot decision rationales during Turn/River</manual>
    <sampling_rate>After task completion</sampling_rate>
  </verify>
  <done>Bots act correctly across all streets and players; Mixed difficulty mode works.</done>
</task>

<task type="auto">
  <name>Task 2: Expand Coaching for Turn and River</name>
  <files>src/lib/useCoaching.ts</files>
  <action>
    - Update `useCoaching` hook to provide recommendations and rationales for `TURN` and `RIVER` stages.
    - Handle cases where the expert baseline doesn't cover a spot by degrading to a solid heuristic and labeling the advice as "Heuristic" in the rationale.
    - Ensure coaching persists through street transitions without resetting the hand.
  </action>
  <verify>
    <automated>npm test src/lib/poker/__tests__/coaching.test.ts</automated>
    <manual>None</manual>
    <sampling_rate>After task completion</sampling_rate>
  </verify>
  <done>Coaching provides valid advice for all 4 betting streets.</done>
</task>

</tasks>

<verification>
Verify that bots in a 6-player game act one by one in the correct order. Check that recommendations for the Turn street take into account the 4th community card.
</verification>

<success_criteria>
- Bots act on all streets (Preflop, Flop, Turn, River).
- Coaching advice is available and accurate for Turn and River.
- Mixed difficulty bots exhibit different playing styles at the same table.
</success_criteria>

<output>
After completion, create `.planning/phases/05-expansion-future/05-02-SUMMARY.md`
</output>
